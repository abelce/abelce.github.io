<!DOCTYPE html><html lang="zh-Hans"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><meta name="baidu-site-verification" content="code-qLvQxBZOZA"/><meta name="google-site-verification" content="LE9f0-2YGlWDKgo5955hV_-oeN3Uq74EN_6gcKaJ60U"/><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><meta http-equiv="Cache-Control" content="no-siteapp"/><link rel="icon" href="/favicon.ico"/><meta name="author" content="文钦,1061225829@qq.com"/><meta property="og:type" content="website"/><meta property="site_name" content="文钦的个人日志"/><meta property="og:site_name" content="文钦的个人日志"/><link rel="dns-prefetch" href="cdn.vwood.xyz"/><link rel="dns-prefetch" href="cloud.vwood.xyz"/><link rel="dns-prefetch" href="file.vwood.xyz"/><meta name="baidu_union_verify" content="a673bc08063b1108073e80d745c6be14"/><meta name="theme-color" content="#ffffff"/><link rel="preload" href="/_next/static/css/7fe7eb80fa1c0261.css" as="style"/><link rel="stylesheet" href="/_next/static/css/7fe7eb80fa1c0261.css" data-n-g=""/><link rel="preload" href="/_next/static/css/4c2ccfedc01c3eb1.css" as="style"/><link rel="stylesheet" href="/_next/static/css/4c2ccfedc01c3eb1.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-a5e747e035296b66.js" defer=""></script><script src="/_next/static/chunks/framework-36098b990598bc0c.js" defer=""></script><script src="/_next/static/chunks/main-406d0e0eabcc4880.js" defer=""></script><script src="/_next/static/chunks/pages/_app-bf3a4dc3e847c280.js" defer=""></script><script src="/_next/static/chunks/pages/tiny-code/embed/%5Bid%5D-dd9d76cf26186152.js" defer=""></script><script src="/_next/static/x74f1MeAnIRvYRPQIafXC/_buildManifest.js" defer=""></script><script src="/_next/static/x74f1MeAnIRvYRPQIafXC/_ssgManifest.js" defer=""></script></head><body class="custom_class"><div id="__next"><div class="style_embed__Ai8jv"><div class="style_embed-header__PtGnP"><span class="style_embed-header-logo__RGkyF">在线编辑</span></div><div class="style_embed-iframe__9UUBv"><iframe width="100%" srcDoc="
      &lt;html lang=&quot;en&quot;&gt;
      &lt;head&gt;
          &lt;meta charset=&quot;UTF-8&quot;&gt;
          &lt;meta name=&quot;apple-mobile-web-app-title&quot; content=&quot;code preview&quot;&gt;
          &lt;title&gt;code preview&lt;/title&gt;
          &lt;style&gt;
            * {
              margin: 0;
              padding: 0;
            }
            body {
              width: 100vw;
              height: 100vh;
            }
          &lt;/style&gt;
          &lt;style&gt;
          body {
  24px;
}
          &lt;/style&gt;

          &lt;script&gt;
          window.console = window.console || function(t) {};
          &lt;/script&gt;

          &lt;script&gt;
          if (document.location.search.match(/type=embed/gi)) {
              window.parent.postMessage(&quot;resize&quot;, &quot;*&quot;);
          }
          &lt;/script&gt;

      &lt;/head&gt;

      &lt;body translate=&quot;no&quot;&gt;
              &lt;input type=&quot;file&quot; class=&quot;upload_inp&quot; /&gt;
    &lt;div style=&quot;display: flex; flex-direction: row;&quot;&gt;
      &lt;div id=&quot;preview&quot; style=&quot;margin-top: 8px&quot;&gt;
        &lt;img style=&quot;width: 200px&quot; /&gt;
      &lt;/div&gt;
      &lt;div id=&quot;result&quot; style=&quot;margin-top: 24px&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
          &lt;script&gt;
                let upload_inp = document.querySelector(&quot;.upload_inp&quot;);
      upload_inp.addEventListener(&quot;change&quot;, function () {
        console.log(upload_inp.files);
        const url = URL.createObjectURL(upload_inp.files[0]);
        const preview = document.querySelector(&quot;#preview img&quot;);
        preview.src = url;

        const result = document.querySelector(&quot;#result&quot;);

        setTimeout(() =&gt; {
          if (&quot;BarcodeDetector&quot; in window) {
            const barcodeDetector = new BarcodeDetector({
              formats: [&quot;qr_code&quot;],
            });
            barcodeDetector
              .detect(preview)
              .then((barcodes) =&gt; {
                barcodes.forEach((barcode) =&gt; {
                  console.log(barcode.rawValue);
                  result.innerHTML =
                    `&lt;span style=&quot;color:green;&quot;&gt;解析结果：&lt;/span&gt;` +
                    barcode.rawValue;
                });
              })
              .catch((err) =&gt; {
                console.log(err);
                result.innerHTML = `&lt;span style=&quot;color:red;&quot;&gt;解析失败&lt;/span&gt;`;
              });
          }
        }, 10);
      });
          &lt;/script&gt;
      &lt;/body&gt;
      &lt;/html&gt;
    " title="code preview" sandbox="allow-forms allow-modals allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-top-navigation-by-user-activation allow-downloads allow-presentation" allow="accelerometer; camera; encrypted-media; display-capture; geolocation; gyroscope; microphone; midi; clipboard-read; clipboard-write; web-share" scrolling="auto" allowfullscreen="" class="style_iframe__kw_S7" loading="lazy" frameBorder="none"></iframe></div><div class="style_embed-footer__IcqAM"><button>重新运行</button></div></div><div class="ant-back-top"></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"createTime":1676181282095,"css":"body {\n  24px;\n}","html":"    \u003cinput type=\"file\" class=\"upload_inp\" /\u003e\n    \u003cdiv style=\"display: flex; flex-direction: row;\"\u003e\n      \u003cdiv id=\"preview\" style=\"margin-top: 8px\"\u003e\n        \u003cimg style=\"width: 200px\" /\u003e\n      \u003c/div\u003e\n      \u003cdiv id=\"result\" style=\"margin-top: 24px\"\u003e\u003c/div\u003e\n    \u003c/div\u003e","id":"fb0f71c7-b7c1-4eee-a03b-88c5914283c7","javascript":"      let upload_inp = document.querySelector(\".upload_inp\");\n      upload_inp.addEventListener(\"change\", function () {\n        console.log(upload_inp.files);\n        const url = URL.createObjectURL(upload_inp.files[0]);\n        const preview = document.querySelector(\"#preview img\");\n        preview.src = url;\n\n        const result = document.querySelector(\"#result\");\n\n        setTimeout(() =\u003e {\n          if (\"BarcodeDetector\" in window) {\n            const barcodeDetector = new BarcodeDetector({\n              formats: [\"qr_code\"],\n            });\n            barcodeDetector\n              .detect(preview)\n              .then((barcodes) =\u003e {\n                barcodes.forEach((barcode) =\u003e {\n                  console.log(barcode.rawValue);\n                  result.innerHTML =\n                    `\u003cspan style=\"color:green;\"\u003e解析结果：\u003c/span\u003e` +\n                    barcode.rawValue;\n                });\n              })\n              .catch((err) =\u003e {\n                console.log(err);\n                result.innerHTML = `\u003cspan style=\"color:red;\"\u003e解析失败\u003c/span\u003e`;\n              });\n          }\n        }, 10);\n      });","name":"BarcodeDetector API现在演示","operator":{"avatar":"//file.vwood.xyz/2023/06/11/upload_ssaf3w2dlo0xox7alrcrca1704a6j2fn.jpg","id":"96f16846-31f2-489c-9af0-d4ca13e836e4","name":"文钦"},"updateTime":1676182620347},"id":"fb0f71c7-b7c1-4eee-a03b-88c5914283c7"},"initialMobxState":{"userStore":{"currentUser":null,"users":[],"token":"","qiniuToken":"","userCount":0,"productCount":0,"commentCount":0,"settingType":"products"},"productStore":{"products":[],"total":0,"type":"","url":"","current":1,"product":null,"likesMap":{},"tabpane":"all","token":"","loading":false,"todayHunters":[],"today":[],"yesterday":[],"relatedProducts":[],"search":""},"commentStore":{"comments":[],"total":0,"current":0},"noteStore":{"token":"","notes":[],"total":0,"note":null},"askStore":{"token":"","asks":[],"total":0,"ask":null},"stypeStore":{"data":[]}},"__N_SSG":true},"page":"/tiny-code/embed/[id]","query":{"id":"fb0f71c7-b7c1-4eee-a03b-88c5914283c7"},"buildId":"x74f1MeAnIRvYRPQIafXC","isFallback":false,"gsp":true,"appGip":true,"scriptLoader":[]}</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-MMNJYR8ESW" crossorigin="anonymous" strategy="lazyOnload"></script><script>window.dataLayer = window.dataLayer || [];
              function gtag(){window.dataLayer.push(arguments)}
              gtag('js', new Date());
              gtag('config', 'G-MMNJYR8ESW');</script><script>
            var _hmt = _hmt || [];
            (function() {
              var hm = document.createElement("script");
              hm.async=true
              hm.src = "https://hm.baidu.com/hm.js?ea0272238080a1dedd4e077d19445ced";
              var s = document.getElementsByTagName("script")[0]; 
              s.parentNode.insertBefore(hm, s);
            })();
            </script></body></html>