{"pageProps":{"data":{"category":{"id":"cd4e8a1e-80d0-49d5-bbd6-d2bc7d7ce3e9","name":"前端"},"content":"简单的说Web Notifcation就是在浏览器中调用操作系统自身的通知，当浏览器窗口缩小，或者切换到其他页面后仍然可以提示用户。\n\n## 一、传统的提示\n以常见的web在线聊天为例，通常在收到新消息后定时修改`document.title` 以闪烁的方式来通知用户，同时使用音频播放声音(Chrome必须要与界面有交互后才能播放声音)；或者在浏览器右上角弹出notifaction通知来通知用户。这些方式在浏览器缩小后都不能达到很好的效果。以前的文章[js实现页面title闪烁](https://vwood.xyz/blog/fbccb2e8-8934-4ffb-b205-0bdde8a8c61f)。\n\n\n## 二、Web Notifcation\n需要注意的是，该功能需要在https环境下才能使用，本地演示不了；同时需要用户同意之后才会生效，在Web Worker中也能使用了。\n\n#### Notification.permission 介绍\n该属性标明用户是否接受现实通知，可能的值如下：\n+ denied： 用户拒绝显示通知\n+ granted： 用户接受显示通知\n+ default：用户选择是未知的，因此浏览器的行为类似于值是 denied\n\n### Notification.requestPermission()\n上面的 **Notification.permission** 的值表示是否接受通知，**Notification.requestPermission**就是请求获取用户的通知权限。\n\n官方示例代码，删除了注释:\n```html\n<button onclick=\"notifyMe()\">Notify me!</button>\n```\n```js\nfunction notifyMe() {\n  if (!(\"Notification\" in window)) {\n    // Check if the browser supports notifications\n    alert(\"This browser does not support desktop notification\");\n  } else if (Notification.permission === \"granted\") {\n    const notification = new Notification(\"Hi there!\");\n  } else if (Notification.permission !== \"denied\") {\n    Notification.requestPermission().then((permission) => {\n      if (permission === \"granted\") {\n        const notification = new Notification(\"Hi there!\");\n      }\n    });\n  }\n}\n```\n### Notification.close()\n手动的方式关闭通知，一般系统会在一段时间之后自动关闭通知。\n\n### 事件\n+ **click** : 当用户点击通知时触发。\n+ **close** : 当用户关闭通知时触发。\n+ **error** : 当通知发生错误时触发。\n+ **show** : 当通知显示时触发。\n\n### 构造函数\n```js\nlet myNotification = new Notification(title, options);\n```\n\n+ **title** : 通知的标题，显示在通知的顶部\n+ **options** ：可选项\n\t+ **dir** : 通知显示的方式，通常跟随浏览器的语言方向，可以设置为ltr和rtl(看起来与css的direction类似)。\n\t+ **lang** ：通知的语言\n\t+ **badge** :  \t 一个用于表示通知的图像的URL，当没有足够的空间用于显示通知本身时。\n\t+ **body** ： 通知的正文，显示在标题下方。\n\t+ **tag** ： 通知的识别标签。\n\t+ **icon** ： 要在通知中显示的图标的 URL\n\t+ **image** ： 要在通知中显示的图像的 URL\n\t+ **data** ：您想要与通知相关联的任意数据。这可以是任何数据类型。\n\t+ **vibrate** ： 振动模式，通知时设备的振动设置。\n\t+ **renotify** ： 新通知替换旧通知后是否应通知用户，默认`false`。\n\t+ **requireInteraction** : 通知应保持有效，直到用户点击或关闭它，而不是自动关闭，默认`false`。\n\t\n### 兼容性\n除了IE主流的浏览器基本都支持\n![在这里插入图片描述](https://file.vwood.xyz/2023/06/11/upload_mqbsmqo4yxalcusm9n3bibrxm2zldq5k.png)\n### 参考文章\n[MDN Notification](https://developer.mozilla.org/zh-CN/docs/Web/API/notification)","createTime":1675866548339,"creativeType":"original","description":"简单的说Web Notifcation就是在浏览器中调用操作系统自身的通知，当浏览器窗口缩小，或者切换到其他页面后仍然可以提示用户。\n\n 一、传统的提示\n以常见的web在线聊天为例，通常在收到新消息后定时修改document.title 以闪烁的方式来通知用户，同时使用音频播放声音(Chrome必须要与界面有交互后才能播放声音)；或者在浏览器右上角弹出notifaction通知来通知用户。","headerImg":"//file.vwood.xyz/2023/02/08/upload_v09vjraid839zhwymy0axs47fa0oc9l1.jpg","id":"fefb5ef1-b0be-441b-93c7-80907d0d4399","isDeleted":false,"likeCount":0,"name":"Web Notifcation介绍","operator":{"avatar":"//file.vwood.xyz/2023/06/11/upload_ssaf3w2dlo0xox7alrcrca1704a6j2fn.jpg","description":"","github":"https://github.com/abelce","id":"96f16846-31f2-489c-9af0-d4ca13e836e4","name":"文钦"},"operatorID":"96f16846-31f2-489c-9af0-d4ca13e836e4","tags":["Notifcation","Web","h5"],"updateTime":1686467406375,"viewCount":0},"id":"fefb5ef1-b0be-441b-93c7-80907d0d4399","latestArticleList":[{"id":"cec72607-3ac8-4397-aaf3-ae0ef4fb1263","name":"Jotai使用笔记(一)","tags":[],"description":"","content":""},{"id":"972f320c-7f72-4d3e-b300-81899acb230a","name":"背包问题","tags":[],"description":"","content":""},{"id":"112b22af-34de-4f2a-b12d-029b948e9550","name":"二叉树层序遍历","tags":[],"description":"","content":""},{"id":"b3c8f2ad-6fe6-4afb-b16d-ec7af9aa92e2","name":"iconfont-extract: 一个将iconfont图标转化为React组件的工具","tags":[],"description":"","content":""},{"id":"b8997e5c-988d-4f9b-9637-143bf0219042","name":"Macos已损坏，无法打开。 您应该将它移到废纸篓。","tags":[],"description":"","content":""}]},"initialMobxState":{"userStore":{"currentUser":null,"users":[],"token":"","qiniuToken":"","userCount":0,"productCount":0,"commentCount":0,"settingType":"products"},"productStore":{"products":[],"total":0,"type":"","url":"","current":1,"product":null,"likesMap":{},"tabpane":"all","token":"","loading":false,"todayHunters":[],"today":[],"yesterday":[],"relatedProducts":[],"search":""},"commentStore":{"comments":[],"total":0,"current":0},"noteStore":{"token":"","notes":[],"total":0,"note":null},"askStore":{"token":"","asks":[],"total":0,"ask":null},"stypeStore":{"data":[]}},"__N_SSG":true}