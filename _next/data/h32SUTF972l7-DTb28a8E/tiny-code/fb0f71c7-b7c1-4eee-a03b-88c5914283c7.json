{"pageProps":{"data":{"createTime":1676181282095,"css":"body {\n   padding: 24px;\n   overflow: hidden;\n}","cssType":"css","html":"    <input type=\"file\" class=\"upload_inp\" />\n    <div style=\"display: flex; flex-direction: row;\">\n      <div id=\"preview\" style=\"margin-top: 8px\">\n        <img style=\"width: 200px\" />\n      </div>\n      <div id=\"result\" style=\"margin-top: 24px\"></div>\n    </div>","htmlType":"html","id":"fb0f71c7-b7c1-4eee-a03b-88c5914283c7","name":"BarcodeDetector API现在演示","operator":{"avatar":"//file.vwood.xyz/2023/06/11/upload_ssaf3w2dlo0xox7alrcrca1704a6j2fn.jpg","id":"96f16846-31f2-489c-9af0-d4ca13e836e4","name":"文钦"},"script":"      let upload_inp = document.querySelector(\".upload_inp\");\n      upload_inp.addEventListener(\"change\", function () {\n        console.log(upload_inp.files);\n        const url = URL.createObjectURL(upload_inp.files[0]);\n        const preview = document.querySelector(\"#preview img\");\n        preview.src = url;\n\n        const result = document.querySelector(\"#result\");\n\n        setTimeout(() => {\n          if (\"BarcodeDetector\" in window) {\n            const barcodeDetector = new BarcodeDetector({\n              formats: [\"qr_code\"],\n            });\n            barcodeDetector\n              .detect(preview)\n              .then((barcodes) => {\n                barcodes.forEach((barcode) => {\n                  console.log(barcode.rawValue);\n                  result.innerHTML =\n                    `<span style=\"color:green;\">解析结果：</span>` +\n                    barcode.rawValue;\n                });\n              })\n              .catch((err) => {\n                console.log(err);\n                result.innerHTML = `<span style=\"color:red;\">解析失败</span>`;\n              });\n          }\n        }, 10);\n      });","scriptType":"javascript","updateTime":1702478027353},"id":"fb0f71c7-b7c1-4eee-a03b-88c5914283c7"},"initialMobxState":{"userStore":{"currentUser":null,"users":[],"token":"","qiniuToken":"","userCount":0,"productCount":0,"commentCount":0,"settingType":"products"},"productStore":{"products":[],"total":0,"type":"","url":"","current":1,"product":null,"likesMap":{},"tabpane":"all","token":"","loading":false,"todayHunters":[],"today":[],"yesterday":[],"relatedProducts":[],"search":""},"commentStore":{"comments":[],"total":0,"current":0},"noteStore":{"token":"","notes":[],"total":0,"note":null},"askStore":{"token":"","asks":[],"total":0,"ask":null},"stypeStore":{"data":[]}},"__N_SSG":true}