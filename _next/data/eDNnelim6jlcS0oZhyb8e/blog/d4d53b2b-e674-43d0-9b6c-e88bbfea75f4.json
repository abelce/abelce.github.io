{"pageProps":{"data":{"category":{"id":"de603bf9-e2dd-4eb4-aee0-c48d86eea130","name":"css"},"content":"在web端实时聊天开发过程中，发送图片是很常见的，显示时图片会有一撑开的过程，页面就会发送抖动，比如如下的代码：\n\n```html\n<html>\n    <body>\n        <div>\n        <img src=\"https://file.vwood.xyz/2022/07/11/upload_ffje1i8jz45jrdflr07i17fqm3vefjg0.jpg\">\n        <div>测试图片</div>\n        </div>\n    </body>\n</html>\n```\n\n图片效果如下:\n\n<img src=\"https://file.vwood.xyz/2022/10/10/upload_bpvs4083ojk6niya7qf90zfecirlwyun.gif\" style=\"max-height: 200px;\">\n\n\n“测试图片”几个字会被图片挤下来，用户体验不太好，同时页面会发生重排，如果给`<img>`标签设置宽度和高度就不会发生这种情况。比如这样：\n```html\n <img src=\"https://file.vwood.xyz/2022/07/11/upload_ffje1i8jz45jrdflr07i17fqm3vefjg0.jpg\" style=\"width: 400px;height:100px\">\n```\n<img src=\"https://file.vwood.xyz/2022/07/11/upload_ffje1i8jz45jrdflr07i17fqm3vefjg0.jpg\" style=\"width: 400px;height:100px\">\n\n但是在聊天时图片的大小都是不一样的，不能写死，不然会变形，只能根据图片实际的宽高比来设置。\n\n\n### 解决办法：\n上传图片时将图片的宽度、高度都保存起来，比如`width: 600px, height: 400px`; 显示时根据实际的宽高比来设置。\n\n第一种方式：\n\n```html\n <img src=\"https://file.vwood.xyz/2022/07/11/upload_ffje1i8jz45jrdflr07i17fqm3vefjg0.jpg\" style=\"aspect-ratio: 600/400;width:300px\">\n```\n `aspect-ratio: 600/400` 就是设置图片的宽高比。这样设置`width:300px`时，高度会自动变为`200px`，图片的显示就是正确的。\n\n <img src=\"https://file.vwood.xyz/2022/07/11/upload_ffje1i8jz45jrdflr07i17fqm3vefjg0.jpg\" style=\"aspect-ratio: 600/400;width: 300px\">\n\n第二种方式：\n只设置高度，自动计算宽度\n\n```html\n <img src=\"https://file.vwood.xyz/2022/07/11/upload_ffje1i8jz45jrdflr07i17fqm3vefjg0.jpg\" style=\"aspect-ratio: 600/400;height:200px\">\n```\n\n <img src=\"https://file.vwood.xyz/2022/07/11/upload_ffje1i8jz45jrdflr07i17fqm3vefjg0.jpg\" style=\"aspect-ratio: 600/400;height:200px\">\n \n 上面两种设置效果都是一样的。\n\n\n 在实际的使用过程中，为了防止图片过大，都会设置最大宽度和高度，比如`max-width: 100%;max-height:200px`；由于宽度要随着浏览器窗口的改变自适应，所以通常设置图片的高度，这样会自动计算出宽度；也就是上面的第二种方式\n \n ```html\n <img src=\"https://file.vwood.xyz/2022/07/11/upload_ffje1i8jz45jrdflr07i17fqm3vefjg0.jpg\" style=\"aspect-ratio: 600/400;max-width:100%;max-height:200px;height:400px\">\n```\n\n <img src=\"https://file.vwood.xyz/2022/07/11/upload_ffje1i8jz45jrdflr07i17fqm3vefjg0.jpg\" style=\"aspect-ratio: 600/400;max-width:100%;max-height:200px;height:400px\">\n 如图由于最大高度`200px`，所以计算出来的宽度就为`300px`;\n\n### 兼容性\n各浏览器对`aspect-ratio`的支持如下，除了IE其他差不多都支持。\n![](https://file.vwood.xyz/2022/10/09/upload_cptgthsvfyp8qdnuoednwo7dmcqammgj.png)","createTime":1665417200000,"creativeType":"original","description":"在web端实时聊天开发过程中，发送图片是很常见的，显示时图片会有一撑开的过程，页面就会发送抖动，比如如下的代码：\n\nhtml\n<html>\n    <body>\n        <div>\n        <img src=\"https:file.vwood.xyz/2022/07/11/upload_ffje1i8jz45jrdflr07i17fqm3vefjg0.jpg\">\n    ","headerImg":"","id":"d4d53b2b-e674-43d0-9b6c-e88bbfea75f4","isDeleted":false,"likeCount":0,"name":"css aspect-ratio使用","operator":{"avatar":"","description":"","github":"","id":"96f16846-31f2-489c-9af0-d4ca13e836e4","name":"a2"},"operatorID":"96f16846-31f2-489c-9af0-d4ca13e836e4","tags":["aspect-ratio"],"updateTime":1665417200000,"viewCount":0},"id":"d4d53b2b-e674-43d0-9b6c-e88bbfea75f4","latestArticleList":[{"id":"b8997e5c-988d-4f9b-9637-143bf0219042","name":"Macos已损坏，无法打开。 您应该将它移到废纸篓。","tags":[],"description":"","content":""},{"id":"26d50f26-364c-4989-a661-0dcbe063ad89","name":"前端原生API识别条形码","tags":[],"description":"","content":""},{"id":"fefb5ef1-b0be-441b-93c7-80907d0d4399","name":"Web Notifcation介绍","tags":[],"description":"","content":""},{"id":"fbccb2e8-8934-4ffb-b205-0bdde8a8c61f","name":"js实现页面title闪烁","tags":[],"description":"","content":""},{"id":"466b23fe-2f73-44b1-9e97-fe552c793e80","name":"css outline","tags":[],"description":"","content":""}]},"initialMobxState":{"userStore":{"currentUser":null,"users":[],"token":"","qiniuToken":"","userCount":0,"productCount":0,"commentCount":0,"settingType":"products"},"productStore":{"products":[],"total":0,"type":"","url":"","current":1,"product":null,"likesMap":{},"tabpane":"all","token":"","loading":false,"todayHunters":[],"today":[],"yesterday":[],"relatedProducts":[],"search":""},"commentStore":{"comments":[],"total":0,"current":0},"noteStore":{"token":"","notes":[],"total":0,"note":null},"askStore":{"token":"","asks":[],"total":0,"ask":null},"stypeStore":{"data":[]}},"__N_SSG":true}