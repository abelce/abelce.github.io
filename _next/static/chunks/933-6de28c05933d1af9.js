(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[933],{25380:function(e){function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=25380,e.exports=t},31159:function(e,t,r){"use strict";r.d(t,{Z:function(){return F}});var l=r(85893),s=r(67294),a=r(2620),n=r.n(a),i=r(94184),o=r.n(i),c=r(51819);let d=e=>{var t;let{extra:r,children:s}=e;return(0,l.jsxs)("div",{className:o()(n().box,e.className),style:null!==(t=e.style)&&void 0!==t?t:{},children:[(0,l.jsxs)("div",{className:n()["box-header"],children:[(0,l.jsx)("div",{className:n()["box-header-left"],children:(0,l.jsx)(c.Z,{size:"small",options:e.options,value:e.codeType,onChange:e.onChange})}),(0,l.jsx)("div",{className:n()["box-header-right"],children:r})]}),(0,l.jsx)("div",{className:n()["box-body"],children:s})]})};var u=(0,s.memo)(d),h=r(63764);let p=e=>{switch(e){case"typescript":case"react-ts":return"typescript";case"sass":return"css";case"react-js":return"javascript";default:return e}},v=e=>{let t=(0,s.useCallback)(t=>{e.onChange(t)},[]),r=(0,s.useMemo)(()=>p(e.lang)||"html",[e.lang]);return(0,l.jsx)(h.ZP,{language:r,defaultValue:"",value:e.value,onChange:t,loading:!1,theme:"vs-dark"})};var m=r(95214);r(28725);var g=r(23337),y=r.n(g);let f=e=>{let t=s.Children.toArray(e.children),r=1/t.length,a="vertical"===e.type,n=(0,s.useRef)(null),[i,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(!1),[h,p]=(0,s.useState)([]),v=()=>a?n.current.clientHeight:n.current.clientWidth,g=()=>{let e=v();t.map((l,s)=>{let i=s!==t.length-1?r*e:(1-r*(t.length-1))*e;h[s]={width:a?n.current.clientWidth:i,height:a?i:n.current.clientHeight}}),p([...h])},f=(0,m.useDebounceFn)(()=>{let e=h.map(e=>(a?e.width=n.current.clientWidth:e.height=n.current.clientHeight,e));p([...e])},100);(0,m.useMount)(()=>{c(!0),g()}),(0,s.useEffect)(()=>{let e=new ResizeObserver(f.run);return e.observe(n.current),()=>{n.current&&e.unobserve(n.current)}},[]);let x=e=>(r,l)=>{let s=a?"height":"width",n=l.size[s]-h[e][s];h[e]=l.size;let i=0;if(t.length>1){n?i=e+1:e-1>=0?i=e-1:e+1<=t.length-1&&(i=e+1);let o=h.reduce((e,t,r)=>i!==r?e+t[s]:e,0),c=v();h[i]={...h[i],[s]:c-o}}p([...h])},w=()=>{u(!0)},b=()=>{u(!1)},_=(0,s.useMemo)(()=>t.map((r,l)=>{let a=h[l];return s.cloneElement(r,{index:l,value:a,onResize:x(l),isFirst:0===l,isLast:l===t.length-1,type:e.type,resizing:d,onResizeStart:w,onResizeStop:b})}),[t,h,i,d]);return(0,l.jsx)("div",{className:o()(y()["vwood-resizer"],{[y()["vwood-resizer-vertical"]]:a}),ref:n,children:i?_:null})};var x=(0,s.memo)(f),w=r(1706);let b=e=>{let{onResize:t,value:r,children:a,isLast:n}=e,i="vertical"===e.type,o=(0,s.useMemo)(()=>({width:"".concat(r.width,"px"),height:"".concat(r.height,"px"),pointerEvents:e.resizing?"none":void 0,userSelect:e.resizing?"none":void 0}),[r.height,r.width,i,e.resizing]),c=()=>(0,l.jsx)("div",{className:y()["editor-resizer-item"],style:o,children:(0,l.jsx)("div",{style:{flex:1,display:"flex",overflow:"hidden"},className:y()["editor-resizer-item-content"],children:a})});return n?c():(0,l.jsx)(w.Resizable,{width:r.width,height:r.height,axis:i?"y":"x",onResizeStart:e.onResizeStart,onResizeStop:e.onResizeStop,handle:n?null:(0,l.jsx)("div",{className:i?"react-resizable-handle-vertical":"react-resizable-handle",onClick(e){e.stopPropagation()}}),onResize:t,draggableOpts:{enableUserSelectHack:!0,allowAnyClick:!0},children:c()})};var _=Object.assign(x,{Item:b}),j=r(21779),S=r.n(j);let C=[{label:"css",value:"css"},{label:"sass",value:"sass"}],z=[{label:"javascript",value:"javascript"},{label:"typescript",value:"typescript"},{label:"react(js)",value:"react-js"},{label:"react(ts)",value:"react-ts"}],T=[{label:"html",value:"html"}],N={htmlType:"html",cssType:"css",scriptType:"javascript"},k=e=>{let t=(0,s.useRef)(),[r,a]=(0,s.useState)(!1),[n,i]=(0,s.useState)({width:0,height:0}),o=e=>{t.current&&i(t.current.getBoundingClientRect())},c=(t,r)=>{e.onChange(t,r)};(0,s.useEffect)(()=>(document.addEventListener("resize",o),a(!0),()=>{document.removeEventListener("resize",o)}),[]);let d=e.value.get("htmlType")||"html",h=e.value.get("cssType")||"css",p=e.value.get("scriptType")||"javascript";return(0,l.jsx)("div",{className:S()["code-div"],ref:t,children:r?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(_,{children:[(0,l.jsx)(_.Item,{children:(0,l.jsx)(u,{codeType:d,options:T,onChange:e=>c("htmlType",e),children:(0,l.jsx)(v,{lang:d,value:e.value.get("html"),onChange(t){e.onChange("html",t)}})})}),(0,l.jsx)(_.Item,{children:(0,l.jsx)(u,{codeType:h,options:C,onChange:e=>c("cssType",e),children:(0,l.jsx)(v,{lang:h,value:e.value.get("css"),onChange(t){e.onChange("css",t)}})})}),(0,l.jsx)(_.Item,{children:(0,l.jsx)(u,{codeType:p,options:z,onChange:e=>c("scriptType",e),children:(0,l.jsx)(v,{lang:p,value:e.value.get("script"),onChange(t){e.onChange("script",t)}})})})]})}):null})};var E=(0,s.memo)(k),M=r(71510),I=r(63602),R=r.n(I);let D=function(e){83==e.keyCode&&(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&e.preventDefault()},O=["html","htmlType","css","cssType","script","scriptType"],Z=e=>{let t=e.cachaValue,r=O.map(r=>{var l,s;return[r,t?(null==localStorage?void 0:null===(l=localStorage.getItem)||void 0===l?void 0:l.call(localStorage,"".concat(location.pathname,"_").concat(r)))||N[r]:null===(s=e.data)||void 0===s?void 0:s[r]]}),[a,n]=(0,s.useState)(new Map(r)),i=(e,r)=>{if(a.set(e,r),n(new Map(a)),t){var l;null==localStorage||null===(l=localStorage.setItem)||void 0===l||l.call(localStorage,"".concat(location.pathname,"_").concat(e),r)}};return(0,s.useEffect)(()=>(document.addEventListener("keydown",D),()=>{document.removeEventListener("keydown",D)}),[]),(0,l.jsx)("div",{className:R().editor,children:(0,l.jsx)("div",{className:R()["iframe-div"],children:(0,l.jsxs)(_,{type:"vertical",children:[(0,l.jsx)(_.Item,{children:(0,l.jsx)(E,{value:a,onChange:i})}),(0,l.jsx)(_.Item,{children:(0,l.jsx)(M.Z,{className:R()["preview-iframe"],codeMap:a})})]})})})};var F=(0,s.memo)(Z)},71510:function(e,t,r){"use strict";r.d(t,{Z:function(){return O}});var l,s,a=r(85893),n=r(67294),i=r(94184),o=r.n(i),c=r(12175);let d=[],u=()=>d,h=()=>{d=[]},p=()=>({visitor:{ImportDeclaration(e){d.push(e.node.source.value)}}});c.registerPlugin("collectImportPlugin",p);let v=e=>{let t={presets:[],plugins:["collectImportPlugin"]};switch(e){case"typescript":t.plugins.push(["transform-typescript"]);break;case"react-js":t.presets.push("react");break;case"react-ts":t.presets.push("react"),t.plugins.push(["transform-typescript",{isTSX:!0}])}return t},m=e=>!/^[http|\.+/|\/]/.test(e),g=e=>{let t={},r=u();return r.forEach(e=>{m(e)&&(t[e]="https://esm.sh/".concat(e))}),t},y=(e,t)=>{try{let r=c.transform(t,v(e)).code;return'<script type="module">'.concat(r,"</script>")}catch(l){return""}},f=(e,t)=>{h();let r=y(e,t);try{return{code:r,imports:g(e)}}catch(l){return console.error(l),{imports:{},code:""}}};(l=s||(s={})).CSS="css",l.SASS="sass",l.LESS="less";let x=e=>({code:e});var w=r(33707);let b=e=>({code:w.kM(e).css});var _=r(39973),j=r(19806),S=r.n(j);let C=(0,_.ZP)([S()]),z={[s.SASS]:b,[s.CSS]:x},T=async function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.CSS,r=arguments.length>1?arguments[1]:void 0,l=null===(e=z[t])||void 0===e?void 0:e.call(z,r),a=await C.process(l.code);return{...l,code:'<link href="https://esm.sh/normalize.css" rel="stylesheet" type="text/css"><style>'.concat(a.css,"</style>")}},N=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let l={};return t.forEach(e=>{e&&Object.assign(l,e)}),l},k=e=>'<script type="importmap">'.concat(JSON.stringify({imports:e},void 0,2),"</script>"),E=async e=>{var t,r;let l=await T(e.get("cssType"),e.get("css")),s=f(e.get("scriptType"),null!==(t=e.get("script"))&&void 0!==t?t:"");return{importMap:k(N(l.imports,s.imports)),htmlCode:null!==(r=e.get("html"))&&void 0!==r?r:"",cssCode:l.code,scriptCode:s.code}};var M=r(95214),I=r(16856),R=r.n(I);let D=e=>{var t;let r=null!==(t=e.codeMap)&&void 0!==t?t:new Map,[l,s]=(0,n.useState)(),i=(0,M.useDebounceFn)(async()=>{try{let e=await E(r);s(e)}catch(t){console.log("解析报错")}},1e3),c=(0,n.useMemo)(()=>{var e,t,r,s;return'\n      <html lang="en">\n      <head>\n          <meta charset="UTF-8">\n          <meta name="apple-mobile-web-app-title" content="code preview">\n          <title>code preview</title>\n          '.concat(null!==(e=null==l?void 0:l.importMap)&&void 0!==e?e:"","\n          ").concat(null!==(t=null==l?void 0:l.cssCode)&&void 0!==t?t:"","\n      </head>\n      <body>\n      ").concat(null!==(r=null==l?void 0:l.htmlCode)&&void 0!==r?r:"","\n      ").concat(null!==(s=null==l?void 0:l.scriptCode)&&void 0!==s?s:"","\n      </body>\n      </html>\n    ")},[l]);return(0,n.useEffect)(()=>{i.run()},[r]),(0,a.jsx)("iframe",{srcDoc:c,width:"100%",className:o()(R().iframe,e.className),title:"code preview",sandbox:"allow-forms allow-modals allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-top-navigation-by-user-activation allow-downloads allow-presentation",allow:"accelerometer; camera; encrypted-media; display-capture; geolocation; gyroscope; microphone; midi; clipboard-read; clipboard-write; web-share",scrolling:"auto",allowTransparency:!0,allowFullScreen:!0,loading:"lazy",frameBorder:"none"})};var O=(0,n.memo)(D)},2620:function(e){e.exports={"resizable-handle":"style_resizable-handle__DFQrT",box:"style_box__gIe6U","box-header":"style_box-header__7Dg1_","box-header-right":"style_box-header-right__Zb7s8","box-body":"style_box-body___WiYx"}},21779:function(e){e.exports={"code-div":"style_code-div__3_lvb"}},23337:function(e){e.exports={"vwood-resizer":"style_vwood-resizer__uV7xv","editor-resizer-item":"style_editor-resizer-item__CtKZZ","vwood-resizer-vertical":"style_vwood-resizer-vertical__Y6Ddg"}},63602:function(e){e.exports={editor:"style_editor__33L3Y","code-div":"style_code-div__AyOuR","iframe-div":"style_iframe-div__VbyrP","preview-iframe":"style_preview-iframe__ri7D3"}},16856:function(e){e.exports={iframe:"style_iframe__kw_S7"}},72950:function(){},22868:function(){},14777:function(){},99830:function(){},70209:function(){}}]);
//# sourceMappingURL=933-6de28c05933d1af9.js.map