{"version":3,"file":"static/chunks/pages/tiny-code/embed/[id]-9487204cdb2ccd96.js","mappings":"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","sources":["webpack://_N_E/?bb6b","webpack://_N_E/./pages/tiny-code/components/Previewer/index.tsx","webpack://_N_E/./pages/tiny-code/embed/[id]/index.page.tsx","webpack://_N_E/./pages/tiny-code/components/Previewer/style.module.scss","webpack://_N_E/./pages/tiny-code/embed/[id]/style.module.scss","webpack://_N_E/<anon>"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/tiny-code/embed/[id]\",\n      function () {\n        return require(\"private-next-pages/tiny-code/embed/[id]/index.page.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/tiny-code/embed/[id]\"])\n      });\n    }\n  ","import React, { FC, memo, useMemo } from \"react\";\nimport { PreviewProps } from \"./types\";\nimport style from \"./style.module.scss\";\nimport classNames from \"classnames\";\n\nconst Preview: FC<PreviewProps> = (props): JSX.Element => {\n  const codeMap = props.codeMap ?? new Map();\n  const srcDoc = useMemo(() => {\n    return `\n      <html lang=\"en\">\n      <head>\n          <meta charset=\"UTF-8\">\n          <meta name=\"apple-mobile-web-app-title\" content=\"code preview\">\n          <title>code preview</title>\n          <style>\n            * {\n              margin: 0;\n              padding: 0;\n            }\n            body {\n              width: 100vw;\n              height: 100vh;\n            }\n          </style>\n          <style>\n          ${codeMap.get(\"css\") ?? \"\"}\n          </style>\n\n          <script>\n          window.console = window.console || function(t) {};\n          </script>\n\n          <script>\n          if (document.location.search.match(/type=embed/gi)) {\n              window.parent.postMessage(\"resize\", \"*\");\n          }\n          </script>\n\n      </head>\n\n      <body translate=\"no\">\n          ${codeMap.get(\"html\") ?? \"\"}\n          <script>\n          ${codeMap.get(\"javascript\") ?? \"\"}\n          </script>\n      </body>\n      </html>\n    `;\n  }, [codeMap]);\n\n  return (\n    <iframe\n      // height=\"100%\"\n      width=\"100%\"\n      srcDoc={srcDoc}\n      title=\"code preview\"\n      sandbox=\"allow-forms allow-modals allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-top-navigation-by-user-activation allow-downloads allow-presentation\"\n      allow=\"accelerometer; camera; encrypted-media; display-capture; geolocation; gyroscope; microphone; midi; clipboard-read; clipboard-write; web-share\"\n      scrolling=\"auto\"\n      allowTransparency\n      //   allowpaymentrequest=\"true\"\n      allowFullScreen\n      className={classNames(style[\"iframe\"], props.className) }\n      loading=\"lazy\"\n      frameBorder=\"none\"\n    ></iframe>\n  );\n};\n\nexport default memo(Preview);\n","// import { memo } from \"react\"\n\nimport { FC, memo, useCallback, useState } from \"react\";\nimport { Request } from \"~/http/request\";\nimport { EmbedProps } from \"./types\";\nimport Preview from \"../../components/Previewer\";\nimport style from \"./style.module.scss\";\n\nconst Embed: FC<EmbedProps> = (props) => {\n  const [codeValue, _] = useState(\n    new Map<string, string>([\n      [\"javascript\", props.data?.javascript],\n      [\"css\", props.data?.css],\n      [\"html\", props.data?.html],\n    ])\n  );\n\n  const handleHome = useCallback(() => {\n    const url = \"https://vwood.xyz/tiny-code/\" + props.data.id;\n    window.open(url)\n  }, [])\n\n  const handleRerun = useCallback(() => {\n    location.reload();\n  }, [])\n\n  return (\n    <div className={style[\"embed\"]}>\n      <div className={style[\"embed-header\"]}>\n        <span className={style[\"embed-header-logo\"]} onClick={handleHome}>在线编辑</span>\n      </div>\n      <div  className={style[\"embed-iframe\"]}>\n        <Preview codeMap={codeValue} />\n      </div>\n      <div className={style[\"embed-footer\"]}>\n        <button onClick={handleRerun}>重新运行</button>\n      </div>\n    </div>\n  );\n};\n\nexport async function getStaticProps(context) {\n  const id = context.params.id;\n  // 获取当前id的代码信息\n  const res = await Request.getChecklessTinyCode(id);\n\n  return {\n    props: { data: res.data, id },\n  };\n}\n\nexport async function getStaticPaths() {\n  const res = await Request.getTinyCodeList({\n    pageNo: 0,\n    pageSize: 9999,\n  });\n\n  const tinyCodeList = res.data.data;\n  const paths = tinyCodeList.map((tinyCode) => ({\n    params: { id: tinyCode.id },\n  }));\n\n  return {\n    paths,\n    fallback: true, // false or 'blocking'\n  };\n}\n\nexport default memo(Embed);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"iframe\":\"style_iframe__kw_S7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"embed\":\"style_embed__Ai8jv\",\"embed-header\":\"style_embed-header__PtGnP\",\"embed-header-logo\":\"style_embed-header-logo__RGkyF\",\"embed-iframe\":\"style_embed-iframe__9UUBv\",\"embed-footer\":\"style_embed-footer__IcqAM\"};","(self[\"webpackChunk_N_E\"] = self[\"webpackChunk_N_E\"] || []).push([[970],{\n\n/***/ 58862:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/tiny-code/embed/[id]\",\n      function () {\n        return __webpack_require__(43972);\n      }\n    ]);\n    if(false) {}\n  \n\n/***/ }),\n\n/***/ 35825:\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(85893);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(67294);\n/* harmony import */ var _style_module_scss__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(16856);\n/* harmony import */ var _style_module_scss__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_style_module_scss__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(94184);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\nconst Preview = (props)=>{\n    var _codeMap;\n    const codeMap = (_codeMap = props.codeMap) !== null && _codeMap !== void 0 ? _codeMap : new Map();\n    const srcDoc = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        var ref, ref1, ref2;\n        return '\\n      <html lang=\"en\">\\n      <head>\\n          <meta charset=\"UTF-8\">\\n          <meta name=\"apple-mobile-web-app-title\" content=\"code preview\">\\n          <title>code preview</title>\\n          <style>\\n            * {\\n              margin: 0;\\n              padding: 0;\\n            }\\n            body {\\n              width: 100vw;\\n              height: 100vh;\\n            }\\n          </style>\\n          <style>\\n          '.concat((ref = codeMap.get(\"css\")) !== null && ref !== void 0 ? ref : \"\", '\\n          </style>\\n\\n          <script>\\n          window.console = window.console || function(t) {};\\n          </script>\\n\\n          <script>\\n          if (document.location.search.match(/type=embed/gi)) {\\n              window.parent.postMessage(\"resize\", \"*\");\\n          }\\n          </script>\\n\\n      </head>\\n\\n      <body translate=\"no\">\\n          ').concat((ref1 = codeMap.get(\"html\")) !== null && ref1 !== void 0 ? ref1 : \"\", \"\\n          <script>\\n          \").concat((ref2 = codeMap.get(\"javascript\")) !== null && ref2 !== void 0 ? ref2 : \"\", \"\\n          </script>\\n      </body>\\n      </html>\\n    \");\n    }, [\n        codeMap\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"iframe\", {\n        // height=\"100%\"\n        width: \"100%\",\n        srcDoc: srcDoc,\n        title: \"code preview\",\n        sandbox: \"allow-forms allow-modals allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-top-navigation-by-user-activation allow-downloads allow-presentation\",\n        allow: \"accelerometer; camera; encrypted-media; display-capture; geolocation; gyroscope; microphone; midi; clipboard-read; clipboard-write; web-share\",\n        scrolling: \"auto\",\n        allowTransparency: true,\n        //   allowpaymentrequest=\"true\"\n        allowFullScreen: true,\n        className: classnames__WEBPACK_IMPORTED_MODULE_2___default()((_style_module_scss__WEBPACK_IMPORTED_MODULE_3___default().iframe), props.className),\n        loading: \"lazy\",\n        frameBorder: \"none\"\n    });\n};\n/* harmony default export */ __webpack_exports__[\"Z\"] = (/*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(Preview));\n\n\n/***/ }),\n\n/***/ 43972:\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"__N_SSG\": function() { return /* binding */ __N_SSG; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(85893);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(67294);\n/* harmony import */ var _components_Previewer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(35825);\n/* harmony import */ var _style_module_scss__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(67952);\n/* harmony import */ var _style_module_scss__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_style_module_scss__WEBPACK_IMPORTED_MODULE_3__);\n// import { memo } from \"react\"\n\n\n\n\nconst Embed = (props)=>{\n    var ref, ref1, ref2;\n    const [codeValue, _] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(new Map([\n        [\n            \"javascript\",\n            (ref = props.data) === null || ref === void 0 ? void 0 : ref.javascript\n        ],\n        [\n            \"css\",\n            (ref1 = props.data) === null || ref1 === void 0 ? void 0 : ref1.css\n        ],\n        [\n            \"html\",\n            (ref2 = props.data) === null || ref2 === void 0 ? void 0 : ref2.html\n        ]\n    ]));\n    const handleHome = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        const url = \"https://vwood.xyz/tiny-code/\" + props.data.id;\n        window.open(url);\n    }, []);\n    const handleRerun = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        location.reload();\n    }, []);\n    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", {\n        className: (_style_module_scss__WEBPACK_IMPORTED_MODULE_3___default().embed),\n        children: [\n            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                className: (_style_module_scss__WEBPACK_IMPORTED_MODULE_3___default()[\"embed-header\"]),\n                children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", {\n                    className: (_style_module_scss__WEBPACK_IMPORTED_MODULE_3___default()[\"embed-header-logo\"]),\n                    onClick: handleHome,\n                    children: \"在线编辑\"\n                })\n            }),\n            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                className: (_style_module_scss__WEBPACK_IMPORTED_MODULE_3___default()[\"embed-iframe\"]),\n                children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_Previewer__WEBPACK_IMPORTED_MODULE_2__/* [\"default\"] */ .Z, {\n                    codeMap: codeValue\n                })\n            }),\n            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", {\n                className: (_style_module_scss__WEBPACK_IMPORTED_MODULE_3___default()[\"embed-footer\"]),\n                children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", {\n                    onClick: handleRerun,\n                    children: \"重新运行\"\n                })\n            })\n        ]\n    });\n};\nvar __N_SSG = true;\n/* harmony default export */ __webpack_exports__[\"default\"] = (/*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(Embed));\n\n\n/***/ }),\n\n/***/ 16856:\n/***/ (function(module) {\n\n// extracted by mini-css-extract-plugin\nmodule.exports = {\"iframe\":\"style_iframe__kw_S7\"};\n\n/***/ }),\n\n/***/ 67952:\n/***/ (function(module) {\n\n// extracted by mini-css-extract-plugin\nmodule.exports = {\"embed\":\"style_embed__Ai8jv\",\"embed-header\":\"style_embed-header__PtGnP\",\"embed-header-logo\":\"style_embed-header-logo__RGkyF\",\"embed-iframe\":\"style_embed-iframe__9UUBv\",\"embed-footer\":\"style_embed-footer__IcqAM\"};\n\n/***/ })\n\n},\n/******/ function(__webpack_require__) { // webpackRuntimeModules\n/******/ var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId); }\n/******/ __webpack_require__.O(0, [774,888,179], function() { return __webpack_exec__(58862); });\n/******/ var __webpack_exports__ = __webpack_require__.O();\n/******/ _N_E = __webpack_exports__;\n/******/ }\n]);"],"names":["self","push","__unused_webpack_module","__unused_webpack_exports","__webpack_require__","window","__NEXT_P","__webpack_exports__","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_1__","_style_module_scss__WEBPACK_IMPORTED_MODULE_3__","_style_module_scss__WEBPACK_IMPORTED_MODULE_3___default","n","classnames__WEBPACK_IMPORTED_MODULE_2__","classnames__WEBPACK_IMPORTED_MODULE_2___default","Preview","_codeMap","codeMap","props","Map","srcDoc","useMemo","ref","ref1","ref2","concat","get","jsx","width","title","sandbox","allow","scrolling","allowTransparency","allowFullScreen","className","iframe","loading","frameBorder","memo","r","d","__N_SSG","_components_Previewer__WEBPACK_IMPORTED_MODULE_2__","Embed","codeValue","_","useState","data","javascript","css","html","handleHome","useCallback","url","id","open","handleRerun","location","reload","jsxs","embed","children","onClick","Z","module","exports","O","s","_N_E"],"sourceRoot":""}