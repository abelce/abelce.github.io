(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[970],{25380:function(e){function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=25380,e.exports=t},58862:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tiny-code/embed/[id]",function(){return o(43972)}])},71510:function(e,t,o){"use strict";o.d(t,{Z:function(){return F}});var n,r,l=o(85893),a=o(67294),s=o(94184),c=o.n(s),i=o(12175);let d=[],u=()=>d,p=()=>{d=[]},m=()=>({visitor:{ImportDeclaration(e){d.push(e.node.source.value)}}});i.registerPlugin("collectImportPlugin",m);let v=e=>{let t={presets:[],plugins:["collectImportPlugin"]};switch(e){case"typescript":t.plugins.push(["transform-typescript"]);break;case"react-js":t.presets.push("react");break;case"react-ts":t.presets.push("react"),t.plugins.push(["transform-typescript",{isTSX:!0}])}return t},h=e=>!/^[http|\.+/|\/]/.test(e),f=e=>{let t={},o=u();return o.forEach(e=>{h(e)&&(t[e]="https://esm.sh/".concat(e))}),t},y=(e,t)=>{try{let o=i.transform(t,v(e)).code;return'<script type="module">'.concat(o,"</script>")}catch(n){return""}},w=(e,t)=>{p();let o=y(e,t);try{return{code:o,imports:f(e)}}catch(n){return console.error(n),{imports:{},code:""}}};(n=r||(r={})).CSS="css",n.SASS="sass",n.LESS="less";let _=e=>({code:e});var b=o(33707);console.log(b);let g=e=>({code:b.compileString(e).css});var S=o(39973),C=o(19806),N=o.n(C);let k=(0,S.ZP)([N()]),x={[r.SASS]:g,[r.CSS]:_},j=async function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.CSS,o=arguments.length>1?arguments[1]:void 0,n=null===(e=x[t])||void 0===e?void 0:e.call(x,o),l=await k.process(n.code);return{...n,code:'<link href="https://esm.sh/normalize.css" rel="stylesheet" type="text/css"><style>'.concat(l.css,"</style>")}},E=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];let n={};return t.forEach(e=>{e&&Object.assign(n,e)}),n},M=e=>'<script type="importmap">'.concat(JSON.stringify({imports:e},void 0,2),"</script>"),P=async e=>{var t,o;let n=await j(e.get("cssType"),e.get("css")),r=w(e.get("scriptType"),null!==(t=e.get("script"))&&void 0!==t?t:"");return{importMap:M(E(n.imports,r.imports)),htmlCode:null!==(o=e.get("html"))&&void 0!==o?o:"",cssCode:n.code,scriptCode:r.code}};var T=o(95214),O=o(16856),A=o.n(O);let D=e=>{var t;let o=null!==(t=e.codeMap)&&void 0!==t?t:new Map,[n,r]=(0,a.useState)(),s=(0,T.useDebounceFn)(async()=>{try{let e=await P(o);r(e)}catch(t){}},1e3),i=(0,a.useMemo)(()=>{var e,t,o,r;return'\n      <html lang="en">\n      <head>\n          <meta charset="UTF-8">\n          <meta name="apple-mobile-web-app-title" content="code preview">\n          <title>code preview</title>\n          '.concat(null!==(e=null==n?void 0:n.importMap)&&void 0!==e?e:"","\n          ").concat(null!==(t=null==n?void 0:n.cssCode)&&void 0!==t?t:"","\n      </head>\n      <body>\n      ").concat(null!==(o=null==n?void 0:n.htmlCode)&&void 0!==o?o:"","\n      ").concat(null!==(r=null==n?void 0:n.scriptCode)&&void 0!==r?r:"","\n      </body>\n      </html>\n    ")},[n]);return(0,a.useEffect)(()=>{s.run()},[o]),(0,l.jsx)("iframe",{srcDoc:i,width:"100%",className:c()(A().iframe,e.className),title:"code preview",sandbox:"allow-forms allow-modals allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-top-navigation-by-user-activation allow-downloads allow-presentation",allow:"accelerometer; camera; encrypted-media; display-capture; geolocation; gyroscope; microphone; midi; clipboard-read; clipboard-write; web-share",scrolling:"auto",allowTransparency:!0,allowFullScreen:!0,loading:"lazy",frameBorder:"none"})};var F=(0,a.memo)(D)},43972:function(e,t,o){"use strict";o.r(t),o.d(t,{__N_SSG:function(){return i}});var n=o(85893),r=o(67294),l=o(71510),a=o(67952),s=o.n(a);let c=e=>{var t,o,a;let[c,i]=(0,r.useState)(new Map([["javascript",null===(t=e.data)||void 0===t?void 0:t.javascript],["css",null===(o=e.data)||void 0===o?void 0:o.css],["html",null===(a=e.data)||void 0===a?void 0:a.html]])),d=(0,r.useCallback)(()=>{let t="https://vwood.xyz/tiny-code/"+e.data.id;window.open(t)},[]),u=(0,r.useCallback)(()=>{location.reload()},[]);return(0,n.jsxs)("div",{className:s().embed,children:[(0,n.jsx)("div",{className:s()["embed-header"],children:(0,n.jsx)("span",{className:s()["embed-header-logo"],onClick:d,children:"在线编辑"})}),(0,n.jsx)("div",{className:s()["embed-iframe"],children:(0,n.jsx)(l.Z,{codeMap:c})}),(0,n.jsx)("div",{className:s()["embed-footer"],children:(0,n.jsx)("button",{onClick:u,children:"重新运行"})})]})};var i=!0;t.default=(0,r.memo)(c)},16856:function(e){e.exports={iframe:"style_iframe__kw_S7"}},67952:function(e){e.exports={embed:"style_embed__Ai8jv","embed-header":"style_embed-header__PtGnP","embed-header-logo":"style_embed-header-logo__RGkyF","embed-iframe":"style_embed-iframe__9UUBv","embed-footer":"style_embed-footer__IcqAM"}},72950:function(){},22868:function(){},14777:function(){},99830:function(){},70209:function(){}},function(e){e.O(0,[968,33,596,214,390,774,888,179],function(){return e(e.s=58862)}),_N_E=e.O()}]);
//# sourceMappingURL=[id]-8ee07bfe085dcb05.js.map