(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[804],{25380:function(e){function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=25380,e.exports=t},7699:function(e,t,l){"use strict";l.d(t,{Z:function(){return c}});var r=l(85893),s=l(63764),n=l(67294);let a=e=>{switch(e){case"typescript":case"react-ts":return"typescript";case"sass":case"css":case"sass":return"css";case"react-js":return"javascript";case"html":return"html";case"less":return"less";case"json":return"json";default:return e}};var i=l(95214);s._m.config({paths:{vs:"/plugin/monaco-editor/vs"}});let o=e=>{let[t,l]=(0,n.useState)(!1),o=(0,n.useCallback)(t=>{e.onChange(t)},[]),c=(0,n.useMemo)(()=>a(e.lang)||"html",[e.lang]);return((0,i.useMount)(()=>{l(!0)}),t)?(0,r.jsx)(s.ZP,{language:c,defaultValue:"",value:e.value||"",onChange:o,loading:!t,theme:e.theme||"vs-dark"}):null};var c=o},26451:function(e,t,l){"use strict";l.d(t,{Z:function(){return D}});var r=l(85893),s=l(67294),n=l(2620),a=l.n(n),i=l(94184),o=l.n(i),c=l(51819);let d=e=>{var t;let{extra:l,children:s}=e;return(0,r.jsxs)("div",{className:o()(a().box,e.className),style:null!==(t=e.style)&&void 0!==t?t:{},children:[(0,r.jsxs)("div",{className:a()["box-header"],children:[(0,r.jsx)("div",{className:a()["box-header-left"],children:(0,r.jsx)(c.Z,{size:"small",options:e.options,value:e.codeType,onChange:e.onChange})}),(0,r.jsx)("div",{className:a()["box-header-right"],children:l})]}),(0,r.jsx)("div",{className:a()["box-body"],children:s})]})};var u=(0,s.memo)(d),h=l(7699),p=l(95214);l(28725);var v=l(23337),m=l.n(v);let g=e=>{let t=s.Children.toArray(e.children),l=1/t.length,n="vertical"===e.type,a=(0,s.useRef)(null),[i,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(!1),[h,v]=(0,s.useState)([]),g=()=>n?a.current.clientHeight:a.current.clientWidth,y=()=>{let e=g();t.map((r,s)=>{let i=s!==t.length-1?l*e:(1-l*(t.length-1))*e;h[s]={width:n?a.current.clientWidth:i,height:n?i:a.current.clientHeight}}),v([...h])},f=(0,p.useDebounceFn)(()=>{if(a.current){let e=h.map(e=>(n?e.width=a.current.clientWidth:e.height=a.current.clientHeight,e));v([...e])}},100);(0,p.useMount)(()=>{c(!0),y()}),(0,s.useEffect)(()=>{let e=new ResizeObserver(f.run);return e.observe(a.current),()=>{a.current&&e.unobserve(a.current)}},[]);let x=e=>(l,r)=>{let s=n?"height":"width",a=r.size[s]-h[e][s];h[e]=r.size;let i=0;if(t.length>1){a?i=e+1:e-1>=0?i=e-1:e+1<=t.length-1&&(i=e+1);let o=h.reduce((e,t,l)=>i!==l?e+t[s]:e,0),c=g();h[i]={...h[i],[s]:c-o}}v([...h])},_=()=>{u(!0)},b=()=>{u(!1)},w=(0,s.useMemo)(()=>t.map((l,r)=>{let n=h[r];return s.cloneElement(l,{index:r,value:n,onResize:x(r),isFirst:0===r,isLast:r===t.length-1,type:e.type,resizing:d,onResizeStart:_,onResizeStop:b})}),[t,h,i,d]);return(0,r.jsx)("div",{className:o()(m()["vwood-resizer"],{[m()["vwood-resizer-vertical"]]:n}),ref:a,children:i?w:null})};var y=(0,s.memo)(g),f=l(1706);let x=e=>{let{onResize:t,value:l,children:n,isLast:a}=e,i="vertical"===e.type,o=(0,s.useMemo)(()=>({width:"".concat(null==l?void 0:l.width,"px"),height:"".concat(null==l?void 0:l.height,"px"),pointerEvents:e.resizing?"none":void 0,userSelect:e.resizing?"none":void 0}),[null==l?void 0:l.height,null==l?void 0:l.width,i,e.resizing]),c=()=>(0,r.jsx)("div",{className:m()["editor-resizer-item"],style:o,children:(0,r.jsx)("div",{style:{flex:1,display:"flex",overflow:"hidden"},className:m()["editor-resizer-item-content"],children:n})});return a?c():(0,r.jsx)(f.Resizable,{width:l.width,height:l.height,axis:i?"y":"x",onResizeStart:e.onResizeStart,onResizeStop:e.onResizeStop,handle:a?null:(0,r.jsx)("div",{className:i?"react-resizable-handle-vertical":"react-resizable-handle",onClick(e){e.stopPropagation()}}),onResize:t,draggableOpts:{enableUserSelectHack:!0,allowAnyClick:!0},children:c()})};var _=Object.assign(y,{Item:x}),b=l(21779),w=l.n(b);let j=[{label:"css",value:"css"},{label:"sass",value:"sass"}],S=[{label:"javascript",value:"javascript"},{label:"typescript",value:"typescript"},{label:"react(js)",value:"react-js"},{label:"react(ts)",value:"react-ts"}],C=[{label:"html",value:"html"}],z={htmlType:"html",cssType:"css",scriptType:"javascript"},T=e=>{let t=(0,s.useRef)(),[l,n]=(0,s.useState)(!1),[a,i]=(0,s.useState)({width:0,height:0}),o=e=>{t.current&&i(t.current.getBoundingClientRect())},c=(t,l)=>{e.onChange(t,l)};(0,s.useEffect)(()=>(document.addEventListener("resize",o),n(!0),()=>{document.removeEventListener("resize",o)}),[]);let d=e.value.get("htmlType")||"html",p=e.value.get("cssType")||"css",v=e.value.get("scriptType")||"javascript";return(0,r.jsx)("div",{className:w()["code-div"],ref:t,children:l?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(_,{children:[(0,r.jsx)(_.Item,{children:(0,r.jsx)(u,{codeType:d,options:C,onChange:e=>c("htmlType",e),children:(0,r.jsx)(h.Z,{lang:d,value:e.value.get("html"),onChange(t){e.onChange("html",t)}})})}),(0,r.jsx)(_.Item,{children:(0,r.jsx)(u,{codeType:p,options:j,onChange:e=>c("cssType",e),children:(0,r.jsx)(h.Z,{lang:p,value:e.value.get("css"),onChange(t){e.onChange("css",t)}})})}),(0,r.jsx)(_.Item,{children:(0,r.jsx)(u,{codeType:v,options:S,onChange:e=>c("scriptType",e),children:(0,r.jsx)(h.Z,{lang:v,value:e.value.get("script"),onChange(t){e.onChange("script",t)}})})})]})}):null})};var N=(0,s.memo)(T),k=l(71510),E=l(63602),M=l.n(E);let Z=function(e){83==e.keyCode&&(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&e.preventDefault()},I=["html","htmlType","css","cssType","script","scriptType"],R=e=>{let t=e.cachaValue,l=I.map(l=>{var r,s;return[l,t?(null==localStorage?void 0:null===(r=localStorage.getItem)||void 0===r?void 0:r.call(localStorage,"".concat(location.pathname,"_").concat(l)))||z[l]:null===(s=e.data)||void 0===s?void 0:s[l]]}),[n,a]=(0,s.useState)(new Map(l)),i=(e,l)=>{if(n.set(e,l),a(new Map(n)),t){var r;null==localStorage||null===(r=localStorage.setItem)||void 0===r||r.call(localStorage,"".concat(location.pathname,"_").concat(e),l)}};return(0,s.useEffect)(()=>(document.addEventListener("keydown",Z),()=>{document.removeEventListener("keydown",Z)}),[]),(0,r.jsx)("div",{className:M().editor,children:(0,r.jsx)("div",{className:M()["iframe-div"],children:(0,r.jsxs)(_,{type:"vertical",children:[(0,r.jsx)(_.Item,{children:(0,r.jsx)(N,{value:n,onChange:i})}),(0,r.jsx)(_.Item,{children:(0,r.jsx)(k.Z,{className:M()["preview-iframe"],codeMap:n})})]})})})};var D=(0,s.memo)(R)},71510:function(e,t,l){"use strict";l.d(t,{Z:function(){return D}});var r,s,n=l(85893),a=l(67294),i=l(94184),o=l.n(i),c=l(12175);let d=[],u=()=>d,h=()=>{d=[]},p=()=>({visitor:{ImportDeclaration(e){d.push(e.node.source.value)}}});c.registerPlugin("collectImportPlugin",p);let v=e=>{let t={presets:[],plugins:["collectImportPlugin"]};switch(e){case"typescript":t.plugins.push(["transform-typescript"]);break;case"react-js":t.presets.push("react");break;case"react-ts":t.presets.push("react"),t.plugins.push(["transform-typescript",{isTSX:!0}])}return t},m=e=>!/^[http|\.+/|\/]/.test(e),g=e=>{let t={},l=u();return l.forEach(e=>{m(e)&&(t[e]="https://esm.sh/".concat(e))}),t},y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",l=c.transform(t,v(e)).code;return'<script type="module">'.concat(l,"</script>")},f=(e,t)=>{h();let l=y(e,t);try{return{code:l,imports:g(e)}}catch(r){return console.error(r),{imports:{},code:""}}};(r=s||(s={})).CSS="css",r.SASS="sass",r.LESS="less";let x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{code:e}};var _=l(91474);let b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{code:_.kM(e).css}};var w=l(39973),j=l(19806),S=l.n(j);let C=(0,w.ZP)([S()]),z={[s.SASS]:b,[s.CSS]:x},T=async function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.CSS,l=arguments.length>1?arguments[1]:void 0,r=null===(e=z[t])||void 0===e?void 0:e.call(z,l),n=await C.process(r.code);return{...r,code:'<link href="https://esm.sh/normalize.css" rel="stylesheet" type="text/css"><style>'.concat(n.css,"</style>")}},N=function(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];let r={};return t.forEach(e=>{e&&Object.assign(r,e)}),r},k=e=>'<script type="importmap">'.concat(JSON.stringify({imports:e},void 0,2),"</script>"),E=async e=>{var t,l;let r=await T(e.get("cssType"),e.get("css")),s=f(e.get("scriptType"),null!==(t=e.get("script"))&&void 0!==t?t:"");return{importMap:k(N(r.imports,s.imports)),htmlCode:null!==(l=e.get("html"))&&void 0!==l?l:"",cssCode:r.code,scriptCode:s.code}};var M=l(95214),Z=l(16856),I=l.n(Z);let R=e=>{var t;let l=null!==(t=e.codeMap)&&void 0!==t?t:new Map,[r,s]=(0,a.useState)(),i=(0,M.useDebounceFn)(async()=>{try{let e=await E(l);s(e)}catch(t){console.error(t),console.log("解析报错")}},1e3),c=(0,a.useMemo)(()=>{var e,t,l,s;return'\n      <html lang="en">\n      <head>\n          <meta charset="UTF-8">\n          <meta name="apple-mobile-web-app-title" content="code preview">\n          <title>code preview</title>\n          '.concat(null!==(e=null==r?void 0:r.importMap)&&void 0!==e?e:"","\n          ").concat(null!==(t=null==r?void 0:r.cssCode)&&void 0!==t?t:"","\n      </head>\n      <body>\n      ").concat(null!==(l=null==r?void 0:r.htmlCode)&&void 0!==l?l:"","\n      ").concat(null!==(s=null==r?void 0:r.scriptCode)&&void 0!==s?s:"","\n      </body>\n      </html>\n    ")},[r]);return(0,a.useEffect)(()=>{i.run()},[l]),(0,n.jsx)("iframe",{srcDoc:c,width:"100%",className:o()(I().iframe,e.className),title:"code preview",sandbox:"allow-forms allow-modals allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-top-navigation-by-user-activation allow-downloads allow-presentation",allow:"accelerometer; camera; encrypted-media; display-capture; geolocation; gyroscope; microphone; midi; clipboard-read; clipboard-write; web-share",scrolling:"auto",allowFullScreen:!0,loading:"lazy",frameBorder:"none"})};var D=(0,a.memo)(R)},2620:function(e){e.exports={"resizable-handle":"style_resizable-handle__DFQrT",box:"style_box__gIe6U","box-header":"style_box-header__7Dg1_","box-header-right":"style_box-header-right__Zb7s8","box-body":"style_box-body___WiYx"}},21779:function(e){e.exports={"code-div":"style_code-div__3_lvb"}},23337:function(e){e.exports={"vwood-resizer":"style_vwood-resizer__uV7xv","editor-resizer-item":"style_editor-resizer-item__CtKZZ","vwood-resizer-vertical":"style_vwood-resizer-vertical__Y6Ddg"}},63602:function(e){e.exports={editor:"style_editor__33L3Y","code-div":"style_code-div__AyOuR","iframe-div":"style_iframe-div__VbyrP","preview-iframe":"style_preview-iframe__ri7D3"}},16856:function(e){e.exports={iframe:"style_iframe__kw_S7"}},72950:function(){},22868:function(){},14777:function(){},99830:function(){},70209:function(){}}]);
//# sourceMappingURL=804-18fab850a7e2232b.js.map